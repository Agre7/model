!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.Model=b()}(this,function(){function a(){function a(a,b){"string"==typeof a?e(a,b):d(a)}function d(a){Object.keys(a).forEach(function(b){e(b,a[b])})}function e(a,b){k[a]=b,j[a]&&j[a].forEach(function(a){a()})}function f(a){return k[a]}function g(a,d,e){a instanceof Array||(a=[a]);var g=b(function(){var b=a.map(f);c(b)&&d.apply(e,b)});g(),a.forEach(function(a){h(a,g)})}function h(a,b){j[a]||(j[a]=[]),j[a].push(b)}var i={set:a,get:f,when:g},j={},k={};return i}function b(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1,a()},0))}}function c(a){return!a.some(function(a){return"undefined"==typeof a||null===a})}return a});